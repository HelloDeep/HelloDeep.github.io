<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>服务器操作汇总</title>
    <url>/2020/04/05/%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%93%8D%E4%BD%9C%E6%B1%87%E6%80%BB/</url>
    <content><![CDATA[<p>这篇博客用来记录在使用服务器过程中经常用到的命令。</p>
<p><img src="https://pic.downk.cc/item/5edcba58c2a9a83be55843c3.jpg" alt=""></p>
<a id="more"></a>

<h2 id="将本地文件夹复制到服务器上"><a href="#将本地文件夹复制到服务器上" class="headerlink" title="将本地文件夹复制到服务器上"></a>将本地文件夹复制到服务器上</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">scp -P 20215 -r desktop/QQP dingp@210.28.133.13:/home/user_data55/dingp/transformers</span><br></pre></td></tr></table></figure>

<h2 id="将服务器上的文件复制到本地"><a href="#将服务器上的文件复制到本地" class="headerlink" title="将服务器上的文件复制到本地"></a>将服务器上的文件复制到本地</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">scp -P 20215 dingp@210.28.133.13:&#x2F;home&#x2F;user_data55&#x2F;dingp&#x2F;transformers&#x2F;models&#x2F;bert_base_uncased.zip desktop&#x2F;</span><br></pre></td></tr></table></figure>

<h2 id="下载文件-并重命名-到当前目录"><a href="#下载文件-并重命名-到当前目录" class="headerlink" title="下载文件(并重命名)到当前目录"></a>下载文件(并重命名)到当前目录</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wget -O bert_base_uncased.zip https://storage.googleapis.com/bert_models/2018_10_18/uncased_L-12_H-768_A-12.zip</span><br></pre></td></tr></table></figure>

<h2 id="linux文件截取前几行，后几行，中间几行"><a href="#linux文件截取前几行，后几行，中间几行" class="headerlink" title="linux文件截取前几行，后几行，中间几行"></a>linux文件截取前几行，后几行，中间几行</h2><p>使用Mac的过程中，有的时候想要查看一个很大的文件，但是Mac的内存不允许，我们可以指查看文件的某几行，具体代码如下。</p>
<p>如果你只想看文件的前100行，可以使用<strong>head</strong>命令，如:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">head -100  filename</span><br></pre></td></tr></table></figure>

<p>如果你想查看文件的后100行，可以使用<strong>tail</strong>命令，如：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">tail -100  filename</span><br></pre></td></tr></table></figure>

<p>如果你查看文件中间一段，你可以使用sed命令，如：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sed -n '100,200p' filename</span><br></pre></td></tr></table></figure>


<p>这样你就可以只查看文件的第100行到第200行。</p>
<p>除此之外，我们还可以将截取的文件用重定向输入到新的文件中：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">head -100 filename&gt;a.txt</span><br></pre></td></tr></table></figure>

<h2 id="Mac打开notebook"><a href="#Mac打开notebook" class="headerlink" title="Mac打开notebook"></a>Mac打开notebook</h2><p>首先cd到需要的文件目录下，然后运行如下代码：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">python -m IPython notebook</span><br></pre></td></tr></table></figure>

<p>或者直接输入(推荐)：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ipython notebook</span><br></pre></td></tr></table></figure>

<h2 id="指定GPU跑代码"><a href="#指定GPU跑代码" class="headerlink" title="指定GPU跑代码"></a>指定GPU跑代码</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">CUDA_VISIBLE_DEVICES=0 python run.py</span><br></pre></td></tr></table></figure>

<h2 id="Linux-删除大文件最后一行"><a href="#Linux-删除大文件最后一行" class="headerlink" title="Linux 删除大文件最后一行"></a>Linux 删除大文件最后一行</h2><p>有的时候数据的最后一行是空行，需要将其删除，可用以下命令：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sed -i '$d' fileName</span><br></pre></td></tr></table></figure>

<h2 id="更换pip源到国内镜像-解决pip-install-慢的问题"><a href="#更换pip源到国内镜像-解决pip-install-慢的问题" class="headerlink" title="更换pip源到国内镜像(解决pip install 慢的问题)"></a>更换pip源到国内镜像(解决pip install 慢的问题)</h2><p>有时候因为网的问题，pip install 经常会失败，可以通过更换pip源的方法，提高下载速度。</p>
<p>比如我们要使用清华源安装 scrapy:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pip install scrapy -i https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure>

<p>参考：</p>
<p><a href="https://blog.csdn.net/chenghuikai/article/details/55258957" target="_blank" rel="noopener">更换pip源到国内镜像</a></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>服务器</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>不同粒度paraphrase的标注</title>
    <url>/2020/06/08/%E4%B8%8D%E5%90%8C%E7%B2%92%E5%BA%A6paraphrase%E7%9A%84%E6%A0%87%E6%B3%A8/</url>
    <content><![CDATA[<p><strong>Paraphrase</strong>，又称复述，旨在把一句话用不同的表达方式再说一遍，也就是同义异表（same meaning, different expression）。比如，句子“<strong><em>NBA中哪个球星的薪水最高？</em></strong>”的 paraphrase 可能是(说“可能是”是因为一个句子的  paraphrase 可能不止一种表达方式)“<strong><em>谁是NBA中年薪最高的球星？</em></strong>”。在自然语言处理中，paraphrase 是一个重要的任务分支，又可以分为 <strong>paraphrase detection</strong>（复述检测，分类任务）以及 <strong>paraphrase detection</strong>（复述生成，生成式任务）。</p>
<p>Paraphrase 其实也可以从不同的粒度来看，比如下面两句话；</p>
<blockquote>
<p><font color=blue><em>How can I be</em> </font> <font color=green>a good geologist</font> <font color=blue><em>?</em></font></p>
<p><font color=blue><em>What should I do to be</em></font> <font color=green>a great geologist</font> <font color=blue><em>?</em></font></p>
</blockquote>
<p>蓝色斜体的部分可以看作是 <strong>sentence-level 的 paraphrase</strong>，绿色的部分可以看作是 <strong>phrase-level 的 paraphrase</strong>。这篇博客主要就是完成这样一个任务：将给定的 paraphrase 句对标注成如上模式，便于后续的分析工作。</p>
<a id="more"></a>

<p>主要的思路是借鉴刘群老师在 ACL 2019 上发表的文章</p>
]]></content>
      <categories>
        <category>paraphrase</category>
      </categories>
      <tags>
        <tag>paraphrase</tag>
        <tag>word alignment</tag>
        <tag>NLP</tag>
      </tags>
  </entry>
  <entry>
    <title>组会报告专题</title>
    <url>/2020/04/23/%E7%BB%84%E4%BC%9A%E6%8A%A5%E5%91%8A/</url>
    <content><![CDATA[<p>这篇博客用来备份我在组会上报告的slides。</p>
<p><img src="https://pic.downk.cc/item/5edcbacec2a9a83be558df2c.jpg" alt=""></p>
<a id="more"></a>

<h2 id="2020-02-19-文本匹配相关论文分享"><a href="#2020-02-19-文本匹配相关论文分享" class="headerlink" title="2020_02_19_文本匹配相关论文分享"></a>2020_02_19_文本匹配相关论文分享</h2><p>链接: <a href="https://pan.baidu.com/s/1vvXjszlIjeFaplvlbdbsEA" target="_blank" rel="noopener">https://pan.baidu.com/s/1vvXjszlIjeFaplvlbdbsEA</a>  </p>
<p>密码: 8w2y</p>
<h2 id="2020-04-22-文本匹配论文分享"><a href="#2020-04-22-文本匹配论文分享" class="headerlink" title="2020_04_22_文本匹配论文分享"></a>2020_04_22_文本匹配论文分享</h2><p>链接: <a href="https://pan.baidu.com/s/1-941pr2ErEuezejM_YJGiw" target="_blank" rel="noopener">https://pan.baidu.com/s/1-941pr2ErEuezejM_YJGiw</a>  </p>
<p>密码: myqt</p>
]]></content>
      <categories>
        <category>组会报告</category>
      </categories>
      <tags>
        <tag>组会报告</tag>
      </tags>
  </entry>
  <entry>
    <title>GloVe词向量转化为Word2Vec文件格式</title>
    <url>/2020/04/18/GloVe%E8%AF%8D%E5%90%91%E9%87%8F%E8%BD%AC%E5%8C%96%E4%B8%BAWord2Vec%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F/</url>
    <content><![CDATA[<p>使用<strong>gensim</strong>加载<strong>GloVe</strong>词向量时，首先需要将GloVe词向量文件转成<strong>Word2Vec</strong>词向量的格式，即：</p>
<blockquote>
<p>词向量的总数 词向量的维度<br>词，对应的词向量<br>词，对应的词向量</p>
<p>…</p>
</blockquote>
<p>不过<strong>GloVe</strong>词向量文件不包含上面格式中第一行的信息，因此我们需要加上这行的信息，也就是在第一行添加<strong>词向量的总数 词向量的维度</strong>这个信息，词向量文件才可以被gensim加载使用。</p>
<a id="more"></a>

<p>代码如下：</p>
<p><strong>g2w.py</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"><span class="keyword">from</span> sys <span class="keyword">import</span> platform</span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算行数，就是词向量/单词数  </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getFileLineNums</span><span class="params">(filename)</span>:</span>  </span><br><span class="line">    f = open(filename, <span class="string">'r'</span>, errors=<span class="string">'ignore'</span>)  </span><br><span class="line">    count = <span class="number">0</span>  </span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> f:  </span><br><span class="line">        count += <span class="number">1</span>  </span><br><span class="line">    <span class="keyword">return</span> count</span><br><span class="line"></span><br><span class="line"><span class="comment"># Linux下打开词向量文件，在开头增加一行，即：词向量的总数 词向量的维度 </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">prepend_line</span><span class="params">(infile, outfile, line)</span>:</span>  </span><br><span class="line">    <span class="keyword">with</span> open(infile, <span class="string">'r'</span>, errors=<span class="string">'ignore'</span>) <span class="keyword">as</span> old:  </span><br><span class="line">        <span class="keyword">with</span> open(outfile, <span class="string">'w'</span>) <span class="keyword">as</span> new:  </span><br><span class="line">            new.write(str(line) + <span class="string">"\n"</span>)  </span><br><span class="line">            shutil.copyfileobj(old, new)  </span><br><span class="line"></span><br><span class="line"><span class="comment"># Windows下打开词向量文件，在开头增加一行，即：词向量的总数 词向量的维度     </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">prepend_slow</span><span class="params">(infile, outfile, line)</span>:</span>  </span><br><span class="line">    <span class="keyword">with</span> open(infile, <span class="string">'r'</span>, errors=<span class="string">'ignore'</span>) <span class="keyword">as</span> fin:  </span><br><span class="line">        <span class="keyword">with</span> open(outfile, <span class="string">'w'</span>) <span class="keyword">as</span> fout:  </span><br><span class="line">            fout.write(line + <span class="string">"\n"</span>)  </span><br><span class="line">            <span class="keyword">for</span> line <span class="keyword">in</span> fin:  </span><br><span class="line">                fout.write(line)  </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">load</span><span class="params">(filename, gensim_file, num_dim)</span>:</span>  </span><br><span class="line">    num_lines = getFileLineNums(filename)  </span><br><span class="line">    gensim_file = gensim_file  </span><br><span class="line">    gensim_first_line = <span class="string">"&#123;&#125; &#123;&#125;"</span>.format(num_lines, num_dim)  </span><br><span class="line">    <span class="comment"># Prepends the line  </span></span><br><span class="line">    <span class="keyword">if</span> platform == <span class="string">"linux"</span> <span class="keyword">or</span> platform == <span class="string">"linux2"</span>:  </span><br><span class="line">        prepend_line(filename, gensim_file, gensim_first_line)  </span><br><span class="line">    <span class="keyword">else</span>:  </span><br><span class="line">        prepend_slow(filename, gensim_file, gensim_first_line)  </span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    parser = argparse.ArgumentParser(description=<span class="string">"Transform GloVe to Word2Vec..."</span>)</span><br><span class="line">    parser.add_argument(<span class="string">"--glv"</span>,</span><br><span class="line">                        default=<span class="string">"./glove.840B.300d.txt"</span>,</span><br><span class="line">                        help=<span class="string">"Path to a GloVe file"</span>)</span><br><span class="line">    parser.add_argument(<span class="string">"--w2v"</span>,</span><br><span class="line">                        default=<span class="literal">None</span>,</span><br><span class="line">                        help=<span class="string">"Path to a Word2Vec file"</span>)</span><br><span class="line">    parser.add_argument(<span class="string">"--dim"</span>,</span><br><span class="line">                        default=<span class="number">300</span>,</span><br><span class="line">                        help=<span class="string">"Dimension of the word embedding"</span>)</span><br><span class="line">    args = parser.parse_args()</span><br><span class="line"></span><br><span class="line">    load(args.glv, args.w2v, args.dim)</span><br></pre></td></tr></table></figure>

<p>调用方法：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">python g2w.py --glv .&#x2F;glove.840B.300d.txt --w2v .&#x2F;g2w.840B.300d.txt --dim 300</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>word embeddings</category>
      </categories>
      <tags>
        <tag>GloVe</tag>
        <tag>Word2Vec</tag>
      </tags>
  </entry>
</search>
